<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>KARAYA</title>
  <link rel="stylesheet" href="/profile.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>
  <%- include('../partials/header') %>

  <div class="dashboard-container">
    <%- include('../partials/sidebar') %>

    <div class="main-profile">
      <div class="profile-header">
        <div class="left-section">
          <div class="profile-photo">
            <img src="/images/profile.jpg" alt="Foto Profil">
            <button class="edit-button">Edit Profil</button>
          </div>
          <div class="profile-info">
            <h2>Kelompok 8 PWEB (Nama)</h2>
            <p>biodata diri (deskripsi)</p>
          </div>
        </div>

        <div class="contact-section">
          <h3>Contact</h3>
          <div class="contact-icons">
            <a href="#"><i class="fab fa-linkedin"></i> LinkedIn</a>
            <a href="#"><i class="fab fa-whatsapp"></i> WhatsApp</a>
            <a href="#"><i class="fab fa-twitter"></i> Twitter</a>
          </div>
        </div>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <button class="tab-btn active" data-tab="arsip">Arsip</button>
        <button class="tab-btn" data-tab="draft">Draft</button>
        <button class="tab-btn" data-tab="portofolio">Portofolio</button>
        <button class="tab-btn" data-tab="suka">Suka</button>
      </div>

      <!-- Konten Tab -->
      <div class="tab-content active" id="arsip">Ini adalah konten untuk tab Arsip.</div>

      <!-- Tab Draft -->
      <div class="portfolio-list hidden" id="draft">
        <% if (!userPortofolios || userPortofolios.length === 0) { %>
          <p>Belum ada draft portofolio.</p>
        <% } else { %>
          <% userPortofolios.forEach(p => { %>
            <% if (p.is_draft === 1) { %> <!-- Menampilkan yang masih draft -->
              <a href="/upload_portofolio?id_portofolio=<%= p.id_portofolio %>" class="portfolio-item">
                <img src="/uploads/<%= p.gambar %>" alt="<%= p.judul %>" width="250">
                <h3><%= p.judul %></h3>
                <p>Ini adalah draft, klik untuk melanjutkan pengeditan.</p>
              </a>
            <% } %>
          <% }) %>
        <% } %>
      </div>

      <!-- Tab Portofolio -->
<!-- Tab Portofolio -->
<div class="portfolio-list hidden" id="portofolio">
  <% if (!userPortofolios || userPortofolios.length === 0) { %>
    <p>Belum ada portofolio yang diunggah.</p>
  <% } else { %>
    <% userPortofolios.forEach(p => { %>
      <% if (p.is_draft === 0) { %>
      <div class="portfolio-item-container">
        <a href="/portofolio/<%= p.id_portofolio %>" class="portfolio-item">
          <img src="/uploads/<%= p.gambar %>" alt="<%= p.judul %>" width="250">
          <h3><%= p.judul %></h3>
        </a>
        
        <!-- Edit & Hapus buttons -->
        <div class="portfolio-actions">
          <a href="/edit_portofolio?id_portofolio=<%= p.id_portofolio %>" class="edit-button">Edit</a>
          <form action="/delete_portofolio/<%= p.id_portofolio %>" method="POST" class="delete-form">
            <button type="submit" class="delete-button">Hapus</button>
          </form>
        </div>
      </div>
      <% } %>
    <% }) %>
  <% } %>
</div>


      <div class="tab-content hidden" id="suka">Ini adalah konten untuk tab Suka.</div>
    </div>
  </div>

  <script>
    const buttons = document.querySelectorAll(".tab-btn");
    const contents = document.querySelectorAll(".tab-content");
    const portfolioList = document.getElementById('portofolio'); // Menyimpan referensi ke portfolio list
    const draftList = document.getElementById('draft'); // Menyimpan referensi ke draft list

    // Fungsi untuk menampilkan tab yang dipilih dan menyembunyikan yang lain
    function showTab(tabId) {
      // Menyembunyikan semua konten
      contents.forEach(c => {
        c.classList.add("hidden"); // Menyembunyikan semua tab
        c.classList.remove("active");
      });

      // Menyembunyikan portfolio list jika bukan tab portofolio yang dipilih
      if (tabId === 'portofolio') {
        portfolioList.classList.remove("hidden");
      } else {
        portfolioList.classList.add("hidden");
      }

      // Menyembunyikan draft list jika bukan tab draft yang dipilih
      if (tabId === 'draft') {
        draftList.classList.remove("hidden");
      } else {
        draftList.classList.add("hidden");
      }

      // Menambahkan kelas aktif ke konten yang dipilih
      document.getElementById(tabId).classList.remove("hidden");
      document.getElementById(tabId).classList.add("active");

      // Menghapus kelas aktif dari semua tombol
      buttons.forEach(b => b.classList.remove("active"));

      // Menambahkan kelas aktif ke tombol yang dipilih
      document.querySelector(`[data-tab="${tabId}"]`).classList.add("active");
    }

    buttons.forEach(button => {
      button.addEventListener("click", () => {
        const target = button.getAttribute("data-tab");
        showTab(target); // Menampilkan konten tab yang dipilih
      });
    });

    // Tampilkan tab default (Arsip) saat pertama kali dimuat
    showTab('portofolio');
  </script>
</body>
</html>
